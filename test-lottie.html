<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lottie Reserveer Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <style>
        :root {
            --primary-color: #F05A70;
            --secondary-color: #F7AACC;
            --complementary-color: #425F93;
        }
        
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f5f5f5;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .city-story {
            display: flex;
            align-items: center;
            gap: 40px;
            margin-bottom: 40px;
            min-height: 300px;
        }
        
        .city-story__text {
            flex: 1;
        }
        
        .city-story__badge {
            flex: 0 0 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        .lottie-reserveer-container {
            width: 200px;
            height: 200px;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .lottie-reserveer-container:hover {
            transform: scale(1.05);
        }
        
        .lottie-reserveer-container svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 4px 12px rgba(0,0,0,0.15));
        }
        
        .scroll-test {
            height: 1000px;
            background: linear-gradient(135deg, #fef8dd 0%, #f7aacc 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Lottie Reserveer Animation Test</h1>
        <p>Scroll down to see the animation in action. The Reserveer badge should rotate and move as you scroll.</p>
        
        <div class="scroll-test">
            <p>Scroll down to see the animation</p>
        </div>
        
        <div class="city-story">
            <div class="city-story__text">
                <h2>City Story Section</h2>
                <p>This is a test of the animated Reserveer badge. The badge should display an animated SVG with "RESERVEER" text and respond to scroll movement.</p>
            </div>
            <div class="city-story__badge">
                <div class="lottie-reserveer-container" id="lottie-reserveer">
                    <!-- Lottie animation will be loaded here -->
                </div>
            </div>
        </div>
        
        <div class="scroll-test">
            <p>Scroll up to see the animation again</p>
        </div>
    </div>

    <script>
        gsap.registerPlugin(ScrollTrigger);
        
        function initLottieReserveer() {
            const lottieContainers = document.querySelectorAll('.lottie-reserveer-container');
            
            lottieContainers.forEach((container, index) => {
                // Create a unique ID for each container to avoid conflicts
                const uniqueId = `lottie-reserveer-${index}-${Date.now()}`;
                container.id = uniqueId;
                
                // Create a simple animated "Reserveer" SVG as a fallback
                const reserveerSVG = `
                    <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="gradient-${uniqueId}" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:var(--primary-color);stop-opacity:1" />
                                <stop offset="100%" style="stop-color:var(--secondary-color);stop-opacity:1" />
                            </linearGradient>
                            <filter id="glow-${uniqueId}">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Background circle -->
                        <circle cx="100" cy="100" r="80" fill="url(#gradient-${uniqueId})" opacity="0.1"/>
                        
                        <!-- Main circle with animation -->
                        <circle cx="100" cy="100" r="60" fill="none" stroke="url(#gradient-${uniqueId})" stroke-width="3" 
                                filter="url(#glow-${uniqueId})" class="reserveer-circle">
                            <animate attributeName="r" values="60;65;60" dur="2s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" repeatCount="indefinite"/>
                        </circle>
                        
                        <!-- Text "Reserveer" -->
                        <text x="100" y="95" text-anchor="middle" fill="var(--primary-color)" font-family="Arial, sans-serif" 
                              font-size="14" font-weight="bold" class="reserveer-text">
                            <tspan x="100" dy="0">RESERVEER</tspan>
                            <animate attributeName="opacity" values="0.7;1;0.7" dur="1.5s" repeatCount="indefinite"/>
                        </text>
                        
                        <!-- Decorative elements -->
                        <circle cx="70" cy="70" r="3" fill="var(--secondary-color)" opacity="0.6">
                            <animate attributeName="opacity" values="0.6;1;0.6" dur="1.5s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="130" cy="130" r="2" fill="var(--primary-color)" opacity="0.6">
                            <animate attributeName="opacity" values="0.6;1;0.6" dur="1.5s" repeatCount="indefinite" begin="0.5s"/>
                        </circle>
                        <circle cx="130" cy="70" r="2.5" fill="var(--complementary-color)" opacity="0.6">
                            <animate attributeName="opacity" values="0.6;1;0.6" dur="1.5s" repeatCount="indefinite" begin="1s"/>
                        </circle>
                        <circle cx="70" cy="130" r="2" fill="var(--secondary-color)" opacity="0.6">
                            <animate attributeName="opacity" values="0.6;1;0.6" dur="1.5s" repeatCount="indefinite" begin="1.5s"/>
                        </circle>
                    </svg>
                `;
                
                container.innerHTML = reserveerSVG;
                
                // Add click functionality to open reservation
                container.addEventListener('click', function() {
                    alert('Reserveer clicked! This would open the reservation popup.');
                });
                
                // Add scroll-based movement
                const scrollTrigger = ScrollTrigger.create({
                    trigger: container.closest('.city-story'),
                    start: "top center",
                    end: "bottom center",
                    onUpdate: (self) => {
                        const progress = self.progress;
                        const rotation = progress * 360; // Full rotation
                        const scale = 1 + (progress * 0.1); // Slight scale effect
                        const y = Math.sin(progress * Math.PI * 2) * 10; // Floating effect
                        
                        gsap.set(container, {
                            rotation: rotation,
                            scale: scale,
                            y: y,
                            duration: 0.1
                        });
                    }
                });
            });
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initLottieReserveer();
        });
    </script>
</body>
</html>
